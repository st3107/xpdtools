

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>xpdtools package &mdash; xpdtools 0.7.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="xpdtools.cli package" href="xpdtools.cli.html" />
    <link rel="prev" title="Tips and Tricks" href="tips_and_tricks.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> xpdtools
          

          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tips_and_tricks.html">Tips and Tricks</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">xpdtools package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="xpdtools.cli.html">xpdtools.cli package</a></li>
<li class="toctree-l3"><a class="reference internal" href="xpdtools.pipelines.html">xpdtools.pipelines package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-xpdtools.calib">xpdtools.calib module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-xpdtools.dev_utils">xpdtools.dev_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-xpdtools.shim">xpdtools.shim module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-xpdtools.tools">xpdtools.tools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-xpdtools">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xpdtools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>xpdtools package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/xpdtools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="xpdtools-package">
<h1>xpdtools package<a class="headerlink" href="#xpdtools-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="xpdtools.cli.html">xpdtools.cli package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="xpdtools.cli.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="xpdtools.cli.html#module-xpdtools.cli.process_tiff">xpdtools.cli.process_tiff module</a></li>
<li class="toctree-l2"><a class="reference internal" href="xpdtools.cli.html#module-xpdtools.cli">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xpdtools.pipelines.html">xpdtools.pipelines package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="xpdtools.pipelines.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="xpdtools.pipelines.html#module-xpdtools.pipelines.raw_pipeline">xpdtools.pipelines.raw_pipeline module</a></li>
<li class="toctree-l2"><a class="reference internal" href="xpdtools.pipelines.html#module-xpdtools.pipelines">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-xpdtools.calib">
<span id="xpdtools-calib-module"></span><h2>xpdtools.calib module<a class="headerlink" href="#module-xpdtools.calib" title="Permalink to this headline">¶</a></h2>
<p>Tools for running pyFAI calibraion</p>
<dl class="function">
<dt id="xpdtools.calib.img_calibration">
<code class="descclassname">xpdtools.calib.</code><code class="descname">img_calibration</code><span class="sig-paren">(</span><em>img</em>, <em>wavelength</em>, <em>calibrant='Ni'</em>, <em>detector='perkin_elmer'</em>, <em>calib_ref_fp=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/calib.html#img_calibration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.calib.img_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calibrate experimental geometry for an image</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>img</strong> (<em>ndarray</em>) – 2D powder diffraction image from calibrant</li>
<li><strong>wavelength</strong> (<em>float</em>) – x-ray wavelength in angstrom.</li>
<li><strong>calibrant</strong> (<em>str, optional</em>) – calibrant being used, default is ‘Ni’.
input could be “full file path” to customized d-spacing file with
“.D” extension or one of pre-defined calibrant names.
List of pre-defined calibrant names:
[‘NaCl’, ‘AgBh’, ‘quartz’, ‘Si_SRM640’, ‘Ni’, ‘Si_SRM640d’,
‘Si_SRM640a’, ‘alpha_Al2O3’, ‘LaB6_SRM660b’, ‘TiO2’, ‘CrOx’,
‘LaB6_SRM660c’, ‘CeO2’, ‘Si_SRM640c’, ‘CuO’, ‘Si_SRM640e’,
‘PBBA’, ‘ZnO’, ‘Si’, ‘C14H30O’, ‘cristobaltite’, ‘LaB6_SRM660a’,
‘Au’, ‘Cr2O3’, ‘Si_SRM640b’, ‘LaB6’, ‘Al’, ‘mock’]</li>
<li><strong>detector</strong> (<em>str or pyFAI.detector.Detector instance, optional.</em>) – detector used to collect data. default value is ‘perkin-elmer’.
other allowed values are in pyFAI documentation.</li>
<li><strong>calib_ref_fp</strong> (<em>str, optional</em>) – full file path to where the native pyFAI calibration information
will be saved. Default to current working directory.</li>
<li><strong>kwargs</strong> – Additional keyword argument for calibration. please refer to
pyFAI documentation for all options.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ai</strong> – instance of AzimuthalIntegrator. Can be used to integrate 2D
images directly.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pyFAI.AzimuthalIntegrator</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>calib Ni image with pyFAI default <code class="docutils literal notranslate"><span class="pre">Ni.D</span></code> d-spacing
with wavlength 0.1823 angstrom</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tifffile</span> <span class="k">as</span> <span class="nn">tif</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ni_img</span> <span class="o">=</span> <span class="n">tif</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;&lt;path_to_img_file&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ai</span> <span class="o">=</span> <span class="n">img_calibration</span><span class="p">(</span><span class="n">ni_img</span><span class="p">,</span> <span class="mf">0.1823</span><span class="p">)</span>
</pre></div>
</div>
<p>calib Ni image with pyFAI customized <code class="docutils literal notranslate"><span class="pre">myNi.D</span></code> d-spacing
with wavlength 0.1823 angstrom</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tifffile</span> <span class="k">as</span> <span class="nn">tif</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ni_img</span> <span class="o">=</span> <span class="n">tif</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;&lt;path_to_img_file&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ai</span> <span class="o">=</span> <span class="n">img_calibration</span><span class="p">(</span><span class="n">ni_img</span><span class="p">,</span> <span class="mf">0.1823</span><span class="p">,</span> <span class="s1">&#39;path/to/myNi.D&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>integrate image right after calibration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">npt</span> <span class="o">=</span> <span class="mi">1482</span> <span class="c1"># just a number for demonstration</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="p">,</span> <span class="n">Iq</span> <span class="o">=</span> <span class="n">ai</span><span class="o">.</span><span class="n">integrate1d</span><span class="p">(</span><span class="n">ni_img</span><span class="p">,</span> <span class="n">npt</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;q_nm^-1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Iq</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">References</p>
<p>pyFAI documentation:
<a class="reference external" href="http://pyfai.readthedocs.io/en/latest/">http://pyfai.readthedocs.io/en/latest/</a></p>
</dd></dl>

</div>
<div class="section" id="module-xpdtools.dev_utils">
<span id="xpdtools-dev-utils-module"></span><h2>xpdtools.dev_utils module<a class="headerlink" href="#module-xpdtools.dev_utils" title="Permalink to this headline">¶</a></h2>
<p>Utilities for making the developer’s lives easier</p>
</div>
<div class="section" id="module-xpdtools.shim">
<span id="xpdtools-shim-module"></span><h2>xpdtools.shim module<a class="headerlink" href="#module-xpdtools.shim" title="Permalink to this headline">¶</a></h2>
<p>Shims</p>
<dl class="class">
<dt id="xpdtools.shim.PDFGetterShim">
<em class="property">class </em><code class="descclassname">xpdtools.shim.</code><code class="descname">PDFGetterShim</code><a class="reference internal" href="_modules/xpdtools/shim.html#PDFGetterShim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.shim.PDFGetterShim" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Shim for PDFGetX3</p>
</dd></dl>

</div>
<div class="section" id="module-xpdtools.tools">
<span id="xpdtools-tools-module"></span><h2>xpdtools.tools module<a class="headerlink" href="#module-xpdtools.tools" title="Permalink to this headline">¶</a></h2>
<p>Tools for x-ray scattering data processing</p>
<dl class="function">
<dt id="xpdtools.tools.binned_outlier">
<code class="descclassname">xpdtools.tools.</code><code class="descname">binned_outlier</code><span class="sig-paren">(</span><em>img</em>, <em>binner</em>, <em>alpha=3</em>, <em>tmsk=None</em>, <em>mask_method='median'</em>, <em>pool=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#binned_outlier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.binned_outlier" title="Permalink to this definition">¶</a></dt>
<dd><p>Sigma Clipping based masking</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>img</strong> (<em>np.ndarray</em>) – The image</li>
<li><strong>binner</strong> (<em>BinnedStatistic1D instance</em>) – The binned statistics information</li>
<li><strong>alpha</strong> (<em>float, optional</em>) – The number of standard deviations to clip, defaults to 3</li>
<li><strong>tmsk</strong> (<em>np.ndarray, optional</em>) – Prior mask. If None don’t use a prior mask, defaults to None.</li>
<li><strong>mask_method</strong> (<em>{‘median’, ‘mean’}, optional</em>) – The method to use for creating the mask, median is faster, mean is more
accurate. Defaults to median.</li>
<li><strong>pool</strong> (<em>Executor instance</em>) – A pool against which jobs can be submitted for parallel processing</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The mask</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.call_stream_element">
<code class="descclassname">xpdtools.tools.</code><code class="descname">call_stream_element</code><span class="sig-paren">(</span><em>callable_item</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#call_stream_element"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.call_stream_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Call callable_item on the args and kwargs</p>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.check_in">
<code class="descclassname">xpdtools.tools.</code><code class="descname">check_in</code><span class="sig-paren">(</span><em>x</em>, <em>k</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#check_in"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.check_in" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="xpdtools.tools.check_kwargs">
<code class="descclassname">xpdtools.tools.</code><code class="descname">check_kwargs</code><span class="sig-paren">(</span><em>x</em>, <em>k</em>, <em>v</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#check_kwargs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.check_kwargs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="xpdtools.tools.decomp">
<code class="descclassname">xpdtools.tools.</code><code class="descname">decomp</code><span class="sig-paren">(</span><em>data</em>, <em>n_components=0.9</em>, <em>model=&lt;class 'sklearn.decomposition.pca.PCA'&gt;</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#decomp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.decomp" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a decomposision of the data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>list of ndarray</em>) – The list of data to be decomposed</li>
<li><strong>n_components</strong> (<em>int, flot, None or str</em>) – The number of components passed to the model initiaion</li>
<li><strong>model</strong> (<em>class</em>) – The model class, must take in <code class="docutils literal notranslate"><span class="pre">n_components</span></code>, have a <code class="docutils literal notranslate"><span class="pre">fit</span></code> method
and a <code class="docutils literal notranslate"><span class="pre">components_</span></code> attribute</li>
<li><strong>kwargs</strong> (<em>dict</em>) – The kwargs to pass to the model creation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>eigen</strong> (<em>ndarray</em>) – The eigenvectors</li>
<li><strong>scores</strong> (<em>ndarray</em>) – The scores for each component</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.fq_getter">
<code class="descclassname">xpdtools.tools.</code><code class="descname">fq_getter</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>composition</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#fq_getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.fq_getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the data to F(Q)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – The q or tth values</li>
<li><strong>y</strong> (<em>ndarray</em>) – The scattered intensity</li>
<li><strong>composition</strong> (<em>str</em>) – The composition</li>
<li><strong>kwargs</strong> (<em>dict</em>) – Additional kwargs for PDFGetter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>q</strong> (<em>ndarray</em>) – The radial values</li>
<li><strong>fq</strong> (<em>ndarray</em>) – The reduced structure function</li>
<li><strong>config</strong> (<em>dict</em>) – The PDFGetter config</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.generate_binner">
<code class="descclassname">xpdtools.tools.</code><code class="descname">generate_binner</code><span class="sig-paren">(</span><em>geo</em>, <em>img_shape</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#generate_binner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.generate_binner" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pixel resolution BinnedStats1D instance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>geo</strong> (<em>pyFAI.geometry.Geometry instance</em>) – The calibrated geometry</li>
<li><strong>img_shape</strong> (<em>tuple, optional</em>) – The shape of the image, if None pull from the mask. Defaults to None.</li>
<li><strong>mask</strong> (<em>np.ndarray, optional</em>) – The mask to be applied, if None no mask is applied. Defaults to None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The configured instance of the binner.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">BinnedStatistic1D</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.generate_map_bin">
<code class="descclassname">xpdtools.tools.</code><code class="descname">generate_map_bin</code><span class="sig-paren">(</span><em>geo</em>, <em>img_shape</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#generate_map_bin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.generate_map_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a q map and the pixel resolution bins</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>geo</strong> (<em>pyFAI.geometry.Geometry instance</em>) – The calibrated geometry</li>
<li><strong>img_shape</strong> (<em>tuple, optional</em>) – The shape of the image, if None pull from the mask. Defaults to None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>q</strong> (<em>ndarray</em>) – The q map</li>
<li><strong>qbin</strong> (<em>ndarray</em>) – The pixel resolution bins</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.ignore_streamz_input">
<code class="descclassname">xpdtools.tools.</code><code class="descname">ignore_streamz_input</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#ignore_streamz_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.ignore_streamz_input" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="xpdtools.tools.load_geo">
<code class="descclassname">xpdtools.tools.</code><code class="descname">load_geo</code><span class="sig-paren">(</span><em>cal_params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#load_geo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.load_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a pyFAI geometry from a dict of calibration parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cal_params</strong> (<em>dict</em>) – The calibration parameters</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The calibrate azimuthal integrator (which inherits from the geometry)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">AzimuthalIntegrator</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.map_to_binner">
<code class="descclassname">xpdtools.tools.</code><code class="descname">map_to_binner</code><span class="sig-paren">(</span><em>pixel_map</em>, <em>bins</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#map_to_binner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.map_to_binner" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms pixel map and bins into a binner</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pixel_map</strong> (<em>np.ndarray</em>) – The map between pixels and values</li>
<li><strong>bins</strong> (<em>np.ndarray</em>) – The bins to use in the binner</li>
<li><strong>mask</strong> (<em>np.ndarray, optional</em>) – The mask for the pixel map</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The binner</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">BinnedStatistic1D</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.mask_img">
<code class="descclassname">xpdtools.tools.</code><code class="descname">mask_img</code><span class="sig-paren">(</span><em>img</em>, <em>binner</em>, <em>edge=30</em>, <em>lower_thresh=0.0</em>, <em>upper_thresh=None</em>, <em>alpha=3</em>, <em>auto_type='median'</em>, <em>tmsk=None</em>, <em>pool=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#mask_img"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.mask_img" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask an image based off of various methods</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>img</strong> (<em>np.ndarray</em>) – The image to be masked</li>
<li><strong>binner</strong> (<em>BinnedStatistic1D instance</em>) – The binned statistics information</li>
<li><strong>edge</strong> (<em>int, optional</em>) – The number of edge pixels to mask. Defaults to 30. If None, no edge
mask is applied</li>
<li><strong>lower_thresh</strong> (<em>float, optional</em>) – Pixels with values less than or equal to this threshold will be masked.
Defaults to 0.0. If None, no lower threshold mask is applied</li>
<li><strong>upper_thresh</strong> (<em>float, optional</em>) – Pixels with values greater than or equal to this threshold will be
masked.
Defaults to None. If None, no upper threshold mask is applied.</li>
<li><strong>alpha</strong> (<em>float, optional</em>) – Then number of acceptable standard deviations, if tuple then we use
a linear distribution of alphas from alpha[0] to alpha[1], if array
then we just use that as the distribution of alphas. Defaults to 3.
If None, no outlier masking applied.</li>
<li><strong>auto_type</strong> (<em>{‘median’, ‘mean’}, optional</em>) – The type of binned outlier masking to be done, ‘median’ is faster,
where ‘mean’ is more accurate, defaults to ‘median’.</li>
<li><strong>tmsk</strong> (<em>np.ndarray, optional</em>) – The starting mask to be compounded on. Defaults to None. If None mask
generated from scratch.</li>
<li><strong>pool</strong> (<em>Executor instance</em>) – A pool against which jobs can be submitted for parallel processing</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tmsk</strong> – The mask as a boolean array. True pixels are good pixels, False pixels
are masked out.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.move_center">
<code class="descclassname">xpdtools.tools.</code><code class="descname">move_center</code><span class="sig-paren">(</span><em>motors</em>, <em>geometry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#move_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.move_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the PONI for pyFAI based off of a diffx/diffy motor move</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>motors</strong> (<em>tuple</em>) – X, Y diff from geometry position</li>
<li><strong>geometry</strong> (<em>pyFAI.geometry.Geometry</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.nu_fq_getter">
<code class="descclassname">xpdtools.tools.</code><code class="descname">nu_fq_getter</code><span class="sig-paren">(</span><em>q</em>, <em>iq</em>, <em>composition</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#nu_fq_getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.nu_fq_getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the data to F(Q) on a non uniform grid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (<em>ndarray</em>) – The q or tth values</li>
<li><strong>iq</strong> (<em>ndarray</em>) – The scattered intensity</li>
<li><strong>composition</strong> (<em>str</em>) – The composition</li>
<li><strong>kwargs</strong> (<em>dict</em>) – Additional kwargs for PDFGetter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>q</strong> (<em>ndarray</em>) – The radial values</li>
<li><strong>fq</strong> (<em>ndarray</em>) – The reduced structure function</li>
<li><strong>config</strong> (<em>dict</em>) – The PDFGetter config</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.nu_pdf_getter">
<code class="descclassname">xpdtools.tools.</code><code class="descname">nu_pdf_getter</code><span class="sig-paren">(</span><em>q</em>, <em>fq</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#nu_pdf_getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.nu_pdf_getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a non uniform F(Q) to the PDF</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (<em>ndarray</em>) – The q or tth values</li>
<li><strong>fq</strong> (<em>ndarray</em>) – The reduced structure funciton</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>r</strong> (<em>ndarray</em>) – The radial values</li>
<li><strong>gr</strong> (<em>ndarray</em>) – The PDF</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.overlay_mask">
<code class="descclassname">xpdtools.tools.</code><code class="descname">overlay_mask</code><span class="sig-paren">(</span><em>img</em>, <em>mask</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#overlay_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.overlay_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Overlay mask on image, masked pixels are <code class="docutils literal notranslate"><span class="pre">np.nan</span></code></p>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.pdf_getter">
<code class="descclassname">xpdtools.tools.</code><code class="descname">pdf_getter</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>composition</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#pdf_getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.pdf_getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the data to the PDF</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – The q or tth values</li>
<li><strong>y</strong> (<em>ndarray</em>) – The scattered intensity</li>
<li><strong>composition</strong> (<em>str</em>) – The composition</li>
<li><strong>kwargs</strong> (<em>dict</em>) – Additional kwargs for PDFGetter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>r</strong> (<em>ndarray</em>) – The radial values</li>
<li><strong>gr</strong> (<em>ndarray</em>) – The PDF</li>
<li><strong>config</strong> (<em>dict</em>) – The PDFGetter config</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.pluck_check">
<code class="descclassname">xpdtools.tools.</code><code class="descname">pluck_check</code><span class="sig-paren">(</span><em>t</em>, <em>position</em>, <em>eq='~~pluck_check_null~~'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#pluck_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.pluck_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a position in an iterable is truthy or equal to eq</p>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.polarization_correction">
<code class="descclassname">xpdtools.tools.</code><code class="descname">polarization_correction</code><span class="sig-paren">(</span><em>img</em>, <em>geo</em>, <em>polarization_factor=0.99</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#polarization_correction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.polarization_correction" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform polarization correction on an image</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>img</strong> (<em>ndarray</em>) – The image</li>
<li><strong>geo</strong> (<em>pyFAI.geometry.Geometry instance</em>) – The calibrated geometry</li>
<li><strong>polarization_factor</strong> (<em>float</em>) – The polarization factor to apply</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The corrected image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.progress_decorator">
<code class="descclassname">xpdtools.tools.</code><code class="descname">progress_decorator</code><span class="sig-paren">(</span><em>func</em>, <em>progress=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#progress_decorator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.progress_decorator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="xpdtools.tools.splay_tuple">
<code class="descclassname">xpdtools.tools.</code><code class="descname">splay_tuple</code><span class="sig-paren">(</span><em>iter_of_tuple</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#splay_tuple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.splay_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Splay all tuples in an iterable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>iter_of_tuple</strong> (<em>iterable</em>) – An iterable which may contain tuples</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The splayed output</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.sq_getter">
<code class="descclassname">xpdtools.tools.</code><code class="descname">sq_getter</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>composition</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#sq_getter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.sq_getter" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the data to F(Q)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>ndarray</em>) – The q or tth values</li>
<li><strong>y</strong> (<em>ndarray</em>) – The scattered intensity</li>
<li><strong>composition</strong> (<em>str</em>) – The composition</li>
<li><strong>kwargs</strong> (<em>dict</em>) – Additional kwargs for PDFGetter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>q</strong> (<em>ndarray</em>) – The radial values</li>
<li><strong>fq</strong> (<em>ndarray</em>) – The reduced structure function</li>
<li><strong>config</strong> (<em>dict</em>) – The PDFGetter config</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="xpdtools.tools.z_score_image">
<code class="descclassname">xpdtools.tools.</code><code class="descname">z_score_image</code><span class="sig-paren">(</span><em>img</em>, <em>binner</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpdtools/tools.html#z_score_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpdtools.tools.z_score_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Z score an image according to the azimuthal average</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>img</strong> (<em>ndarray</em>) – The image</li>
<li><strong>binner</strong> (<em>BinnedStatistic1D instance</em>) – The binner</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The z scored image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-xpdtools">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-xpdtools" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="xpdtools.cli.html" class="btn btn-neutral float-right" title="xpdtools.cli package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tips_and_tricks.html" class="btn btn-neutral float-left" title="Tips and Tricks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Author

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>